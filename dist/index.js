"use strict";var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(exports,"__esModule",{value:!0});function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function getRandomString(a){for(var b="";b.length<a;)b+=Math.random().toString(36).substr(2,a-b.length);return s}function getCreatedAnonymousId(){var a=localStorage.getItem("ingrow_events_anonymous_id");return a||(a=getRandomString(32),localStorage.setItem("ingrow_events_anonymous_id",a)),a}function getDeviceInfo(){var a=navigator,b=a.userAgent,c=a.appName,d=window,e=d.screen,f=e.width,g=e.height;return{userAgent:b,browserName:c,screen:{width:f,height:g}}}var ingrow=function(){function a(b,c,d){_classCallCheck(this,a),this.apiKey=b,this.projectID=c,this.apiEndpoint="https://event.ingrow.co",this.anonymousId=getCreatedAnonymousId(),this.ip="autofill",this.setUserID(d)}return _createClass(a,[{key:"setUserID",value:function b(a){this.userId=a||""}},{key:"sendEvent",value:function k(a,b,c){var d=c||{},e=d.sendDeviceInfo,f=d.done,g=[],h=function(a,b){g.push({name:a,input:b})};h("session",{anonymous_id:this.anonymousId,user_id:userId}),h("ip",{ip:this.ip}),void 0!==e&&e&&h("device",getDeviceInfo());var i={ingrow:{stream:a,project:this.projectID},enrichment:g,event:b},j=new XMLHttpRequest;j.setRequestHeader("api-key",this.apiKey),j.open("POST",this.apiEndpoint+"/v1"),j.send(JSON.stringify(i)),j.onload=function(){f&&f(j.response)},j.onerror=function(){f&&f(null,j.response)}}}]),a}();exports.default=ingrow;